{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst MY_API_KEY = '51687236-e99e958891c77c47ce6f4e325';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getImagesByQuery(query, page = 1) {\n  return axios\n    .get(BASE_URL, {\n      params: {\n        key: MY_API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page\n      },\n    })\n    .then(response => response.data);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nexport function createGallery(images) {\n  const galleryResult = document.querySelector('.gallery');\n\n  const markup = images\n    .map(\n      element => `\n        <li class='gallery-item'>\n            <a href='${element.largeImageURL}'>\n                <img class='gallery-img' src='${element.webformatURL}' alt='${element.tags}'>\n                <ul class='gallery-item-info'>\n                    <li class='text-info'>Likes<span class='text-info-data'>${element.likes}</span></li>\n                    <li class='text-info'>Views<span class='text-info-data'>${element.views}</span></li>\n                    <li class='text-info'>Comments<span class='text-info-data'>${element.comments}</span></li>\n                    <li class='text-info'>Downloads<span class='text-info-data'>${element.downloads}</span></li>\n                </ul>\n            </a>\n        </li>\n    `\n    )\n    .join('');\n\n  galleryResult.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {});\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function showLoader() {\n  document.querySelector('.loader')?.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader')?.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  document.querySelector('.load-more')?.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector('.load-more')?.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport * as pixabayFoo from './js/pixabay-api';\nimport * as renderFoo from './js/render-functions';\n\nconst formSearch = document.querySelector('form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nconst PER_PAGE = 15;\n\nasync function handleRequest(isNewSearch = false) {\n  renderFoo.showLoader();\n  if (isNewSearch) renderFoo.clearGallery();\n\n  try {\n    const data = await pixabayFoo.getImagesByQuery(currentQuery, currentPage);\n    renderFoo.hideLoader();\n\n    if (isNewSearch && !data.hits.length) {\n      renderFoo.hideLoadMoreButton();\n      iziToast.error({\n        title:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'bottomCenter',\n      });\n      return;\n    }\n\n    renderFoo.createGallery(data.hits);\n\n    if (!isNewSearch) {\n      const galleryItem = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect();\n      if (galleryItem) {\n        window.scrollBy({\n          top: galleryItem.height * 2,\n          behavior: 'smooth',\n        });\n      }\n    }\n\n    if (isNewSearch) totalHits = data.totalHits;\n\n    if (currentPage * PER_PAGE >= totalHits || !data.hits.length) {\n      renderFoo.hideLoadMoreButton();\n      iziToast.info({\n        title: \"We're sorry, but you've reached the end of search results.\",\n        position: 'bottomCenter',\n      });\n    } else {\n      renderFoo.showLoadMoreButton();\n    }\n  } catch (error) {\n    renderFoo.hideLoader();\n    iziToast.error({ title: 'Error happened' });\n    console.error(error);\n  }\n}\n\nformSearch.addEventListener('submit', event => {\n  event.preventDefault();\n\n  currentQuery = formSearch.querySelector('input').value.trim();\n\n  if (!currentQuery) return;\n\n  currentPage = 1;\n  totalHits = 0;\n  handleRequest(true);\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage++;\n  handleRequest();\n});\n"],"names":["MY_API_KEY","BASE_URL","getImagesByQuery","query","page","axios","response","lightbox","createGallery","images","galleryResult","markup","element","SimpleLightbox","clearGallery","showLoader","_a","hideLoader","showLoadMoreButton","hideLoadMoreButton","formSearch","loadMoreBtn","currentQuery","currentPage","totalHits","PER_PAGE","handleRequest","isNewSearch","renderFoo.showLoader","renderFoo.clearGallery","data","pixabayFoo.getImagesByQuery","renderFoo.hideLoader","renderFoo.hideLoadMoreButton","iziToast","renderFoo.createGallery","galleryItem","renderFoo.showLoadMoreButton","error","event"],"mappings":"owBAGA,MAAMA,EAAa,qCACbC,EAAW,2BAEV,SAASC,EAAiBC,EAAOC,EAAO,EAAG,CAChD,OAAOC,EACJ,IAAIJ,EAAU,CACb,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACP,CAAK,EACA,KAAKE,GAAYA,EAAS,IAAI,CACnC,CCjBA,IAAIC,EAAW,KAER,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAgB,SAAS,cAAc,UAAU,EAEjDC,EAASF,EACZ,IACCG,GAAW;AAAA;AAAA,uBAEMA,EAAQ,aAAa;AAAA,gDACIA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,8EAEZA,EAAQ,KAAK;AAAA,8EACbA,EAAQ,KAAK;AAAA,iFACVA,EAAQ,QAAQ;AAAA,kFACfA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,KAK9F,EACA,KAAK,EAAE,EAEVF,EAAc,mBAAmB,YAAaC,CAAM,EAE/CJ,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIM,EAAe,aAAc,CAAE,CAAA,CAIlD,CAEO,SAASC,GAAe,CAC7B,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,CAEO,SAASC,GAAa,QAC3BC,EAAA,SAAS,cAAc,SAAS,IAAhC,MAAAA,EAAmC,UAAU,OAAO,SACtD,CAEO,SAASC,GAAa,QAC3BD,EAAA,SAAS,cAAc,SAAS,IAAhC,MAAAA,EAAmC,UAAU,IAAI,SACnD,CAEO,SAASE,GAAqB,QACnCF,EAAA,SAAS,cAAc,YAAY,IAAnC,MAAAA,EAAsC,UAAU,OAAO,SACzD,CAEO,SAASG,GAAqB,QACnCH,EAAA,SAAS,cAAc,YAAY,IAAnC,MAAAA,EAAsC,UAAU,IAAI,SACtD,CC/CA,MAAMI,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EAChB,MAAMC,EAAW,GAEjB,eAAeC,EAAcC,EAAc,GAAO,CAChDC,IACID,GAAaE,IAEjB,GAAI,CACF,MAAMC,EAAO,MAAMC,EAA4BT,EAAcC,CAAW,EAGxE,GAFAS,IAEIL,GAAe,CAACG,EAAK,KAAK,OAAQ,CACpCG,IACAC,EAAS,MAAM,CACb,MACE,2EACF,SAAU,cAClB,CAAO,EACD,MACD,CAID,GAFAC,EAAwBL,EAAK,IAAI,EAE7B,CAACH,EAAa,CAChB,MAAMS,EAAc,SACjB,cAAc,eAAe,EAC7B,wBACCA,GACF,OAAO,SAAS,CACd,IAAKA,EAAY,OAAS,EAC1B,SAAU,QACpB,CAAS,CAEJ,CAEGT,IAAaH,EAAYM,EAAK,WAE9BP,EAAcE,GAAYD,GAAa,CAACM,EAAK,KAAK,QACpDG,IACAC,EAAS,KAAK,CACZ,MAAO,6DACP,SAAU,cAClB,CAAO,GAEDG,GAEH,OAAQC,EAAO,CACdN,IACAE,EAAS,MAAM,CAAE,MAAO,gBAAkB,CAAA,EAC1C,QAAQ,MAAMI,CAAK,CACpB,CACH,CAEAlB,EAAW,iBAAiB,SAAUmB,GAAS,CAC7CA,EAAM,eAAc,EAEpBjB,EAAeF,EAAW,cAAc,OAAO,EAAE,MAAM,OAElDE,IAELC,EAAc,EACdC,EAAY,EACZE,EAAc,EAAI,EACpB,CAAC,EAEDL,EAAY,iBAAiB,QAAS,IAAM,CAC1CE,IACAG,GACF,CAAC"}